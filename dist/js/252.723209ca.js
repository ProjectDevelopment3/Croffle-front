"use strict";(self["webpackChunkcroffle_frontend"]=self["webpackChunkcroffle_frontend"]||[]).push([[252],{797:function(e,t,n){n.d(t,{Dk:function(){return s},UB:function(){return r},j2:function(){return o}});var a=n(3376);function s(){return a.eE.get("cafes")}function o(e){return a.eE.get(`cafe?id=${e}`)}function r(e){return a.eE.get(`cafe/search?name=${e}`)}},5140:function(e,t,n){n.d(t,{AF:function(){return s},AJ:function(){return r},Xp:function(){return o}});var a=n(3376);function s(e){return a.Uj.post("like",e)}function o(e){return a.Uj.post("like/del",e)}function r(){return a.Uj.get("likes")}},7516:function(e,t,n){n.d(t,{X:function(){return s},o:function(){return o}});var a=n(3376);function s(e){return a.Uj.post("review",e)}function o(e){return a.eE.get(`review/${e}`)}},4252:function(e,t,n){n.r(t),n.d(t,{default:function(){return O}});var a=n(3396),s=n(7139);const o={id:"cafe-page"},r={class:"cafe-info"},i={class:"cafe__name"},c={class:"cafe__address"},l=(0,a.Uk)(" 좋아요 "),u={class:"cafe-info__detail"},d={class:"cafe-info__wrapper"},f=(0,a._)("label",null,"전화번호",-1),_={class:"cafe-info__wrapper"},p=(0,a._)("label",null,"운영시간",-1),v={class:"cafe-info__wrapper"},m=(0,a._)("label",null,"SNS",-1),h={id:"cafe-menu"},w=(0,a._)("span",null,"메뉴",-1),k=(0,a._)("p",{class:"guide"},[(0,a.Uk)(" 아래 버튼을 눌러 크로플 메뉴 추가 제보 또는"),(0,a._)("br"),(0,a.Uk)(" 카페 정보 수정 제보를 해주세요! ")],-1),g={class:"menu__list"},b={class:"menus__name"},D={class:"menus__price"},$={class:"review__wrapper"},y=(0,a.Uk)("리뷰  "),C={class:"card__info"},I={class:"card__user"},z={class:"text__nickname"},A={class:"text__date"},U={class:"rate__stars"},M={class:"text__content"};function j(e,t,n,j,R,x){const F=(0,a.up)("modal-content"),Z=(0,a.up)("modal-component");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",o,[(0,a._)("div",r,[(0,a._)("span",i,(0,s.zw)(R.cafeInfo.name),1),(0,a._)("span",c,(0,s.zw)(R.cafeInfo.roadaddr),1),(0,a._)("button",{type:"button",class:"cafe__btn-like",onClick:t[0]||(t[0]=(...e)=>x.scrapCafe&&x.scrapCafe(...e))},[l,(0,a._)("i",{class:(0,s.C_)(["fa-heart",R.liked?"fas":"far"])},null,2)])]),(0,a._)("div",u,[(0,a._)("div",d,[f,(0,a._)("span",null,(0,s.zw)(R.cafeInfo.telephone),1)]),(0,a._)("div",_,[p,(0,a._)("span",null,(0,s.zw)(R.cafeInfo.hours),1)]),(0,a._)("div",v,[m,(0,a._)("span",null,(0,s.zw)(R.cafeInfo.site),1)])])]),(0,a._)("div",h,[w,k,(0,a._)("div",g,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(R.cafeInfo.menus,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"menu-info__wrapper",key:e},[(0,a._)("span",b,(0,s.zw)(R.cafeInfo.menuListDtos.name),1),(0,a._)("span",D,(0,s.zw)(R.cafeInfo.menuListDtos.price),1)])))),128))])]),(0,a._)("button",{type:"button",onClick:t[1]||(t[1]=e=>R.isModalActive=!0),class:"btn--primary"}," 제보하기 + "),(0,a._)("div",$,[(0,a._)("span",null,[y,(0,a._)("strong",null,(0,s.zw)(R.reviewData.length),1)]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(R.reviewData,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:"review__card"},[(0,a._)("div",C,[(0,a._)("div",I,[(0,a._)("div",z,(0,s.zw)(e.author),1),(0,a._)("div",A,(0,s.zw)(e.createdDate),1)]),(0,a._)("div",U,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(R.reviewData[t].rate,(e=>((0,a.wg)(),(0,a.iD)("i",{key:e,class:"fas fa-star fa-1x"})))),128))]),(0,a._)("div",M,(0,s.zw)(e.content),1)])])))),128))]),(0,a._)("button",{type:"button",onClick:t[2]||(t[2]=(...e)=>x.toReviewForm&&x.toReviewForm(...e)),class:"btn--border"}," 리뷰 작성하기 + "),R.isModalActive?((0,a.wg)(),(0,a.j4)(Z,{key:0},{default:(0,a.w5)((()=>[(0,a.Wm)(F,{onCloseModal:t[3]||(t[3]=e=>R.isModalActive=!1)})])),_:1})):(0,a.kq)("",!0)])}var R=n(1142);const x={class:"content"},F={class:"btn__close"},Z=["src"],E=(0,a._)("h1",null,"무엇을 제보하시나요?",-1),H={class:"btn__wrapper"};function L(e,t,n,s,o,r){return(0,a.wg)(),(0,a.iD)("div",x,[(0,a._)("div",F,[(0,a._)("button",{type:"button",class:"btn--transparent",onClick:t[0]||(t[0]=t=>e.$emit("close-modal"))},[(0,a._)("img",{src:o.ic__close},null,8,Z)])]),E,(0,a._)("div",H,[(0,a._)("button",{type:"button",class:"btn--secondary",onClick:t[1]||(t[1]=(...e)=>r.addReport&&r.addReport(...e))}," 크로플 메뉴 추가 제보 "),(0,a._)("button",{type:"button",class:"btn--negative",onClick:t[2]||(t[2]=(...e)=>r.reportInfo&&r.reportInfo(...e))}," 카페 정보 수정 제보 ")])])}var K=n(8391),S={name:"ModalContent",props:{msg:String},data(){return{ic__close:K}},methods:{addReport(){this.$emit("close-modal"),this.$router.push(`/cafe/${this.$route.params.id}/addreport`)},reportInfo(){this.$emit("close-modal"),this.$router.push(`/cafe/${this.$route.params.id}/reportinfo`)}}},X=n(89);const Y=(0,X.Z)(S,[["render",L]]);var J=Y,W=n(5140),q=n(7516),B=n(797),N={created(){this.fetchCafeInfo()},components:{ModalComponent:R.Z,ModalContent:J},data(){return{isModalActive:!1,isHeaderActive:!0,liked:!1,reviewData:[{author:"씽씽",createdDate:"2022.04.01",content:"냉동 생지 사다가 만드는게 아니라 사장님이 직접 만든 반죽으로 하심",rate:3},{author:"씽씽",createdDate:"2022.04.01",content:"냉동 생지 사다가 만드는게 아니라 사장님이 직접 만든 반죽으로 하심",rate:2}],cafeInfo:{id:0,name:"밀크북",roadaddr:"서울특별시 성북구 80로 ",telephone:"02-345-6720",hours:"오전 10시 부터 오후 8시 까지",site:"",menuListDtos:[{menuId:5,cafeId:1,name:"테스트 메뉴1",price:"테스트 가격1"}]}}},methods:{toReviewForm(){this.$router.push(`/cafe/${this.$route.params.id}/review`)},async fetchReview(){console.log("리뷰 조회");try{const e=await(0,q.o)(this.$route.params.id);this.reviewsData=e.data}catch(e){console.log(e)}},async checkLike(){try{const{likedData:e}=await(0,W.AJ)();e.some((function(e){return e.id==this.$route.params.id?this.liked=!0:this.liked=!1}))}catch(e){console.log(e)}},async scrapCafe(){if(""==this.$store.state.token||"undefined"==this.$store.state.token)alert("로그인이 필요한 기능입니다.");else if(0==this.liked)try{console.log("좋아요"),await(0,W.AF)(this.$route.params.id),this.liked=!this.liked}catch(e){console.log(e.message)}else try{console.log("좋아요 취소"),await(0,W.Xp)(this.$route.params.id),this.liked=!this.liked}catch(e){console.log(e.message)}},async fetchCafeInfo(){try{console.log("카페 상세정보 조회");const{data:e}=await(0,B.j2)(this.$route.params.id);this.cafeInfo=e.data}catch(e){console.log(e.message)}}}};const G=(0,X.Z)(N,[["render",j]]);var O=G},1142:function(e,t,n){n.d(t,{Z:function(){return d}});var a=n(3396);const s={class:"modal"},o=(0,a._)("div",{class:"overlay"},null,-1),r={class:"modal-card"};function i(e,t,n,i,c,l){return(0,a.wg)(),(0,a.iD)("div",s,[o,(0,a._)("div",r,[(0,a.WI)(e.$slots,"default")])])}var c={props:{couponData:[]}},l=n(89);const u=(0,l.Z)(c,[["render",i]]);var d=u},8391:function(e,t,n){e.exports=n.p+"img/close.a59852f9.svg"}}]);
//# sourceMappingURL=252.723209ca.js.map