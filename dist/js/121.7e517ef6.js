"use strict";(self["webpackChunkcroffle_frontend"]=self["webpackChunkcroffle_frontend"]||[]).push([[121],{5140:function(t,e,a){a.d(e,{AF:function(){return s},AJ:function(){return c},Xp:function(){return o}});var n=a(3376);function s(t){return n.Uj.post("like",t)}function o(t){return n.Uj.post("like/del",t)}function c(){return n.Uj.get("likes")}},1955:function(t,e,a){a.d(e,{$F:function(){return i},Bg:function(){return s},GR:function(){return r},VN:function(){return l},ci:function(){return c},l_:function(){return o}});var n=a(3376);function s(){return n.Uj.get("user/me")}function o(t){return n.Uj.put("nickname",t)}function c(t){return n.Uj.post("nickname/verify",t)}function i(){return n.Uj.get("stamps")}function l(){return n.Uj.get("coupons")}function r(t){return n.Uj["delete"](`coupon/use?couponId=${t}`)}},1142:function(t,e,a){a.d(e,{Z:function(){return p}});var n=a(3396);const s={class:"modal"},o=(0,n._)("div",{class:"overlay"},null,-1),c={class:"modal-card"};function i(t,e,a,i,l,r){return(0,n.wg)(),(0,n.iD)("div",s,[o,(0,n._)("div",c,[(0,n.WI)(t.$slots,"default")])])}var l={props:{couponData:[]}},r=a(89);const u=(0,r.Z)(l,[["render",i]]);var p=u},251:function(t,e,a){a.r(e),a.d(e,{default:function(){return et}});var n=a(3396);function s(t,e,a,s,o,c){const i=(0,n.up)("router-view"),l=(0,n.up)("scraped-list-component"),r=(0,n.up)("coupon-list-component"),u=(0,n.up)("coupon-modal-content"),p=(0,n.up)("modal-component");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(i,{onShowList:c.showList,activeList:o.activeList,onSetMessage:c.setMessage,message:o.message},null,8,["onShowList","activeList","onSetMessage","message"]),1==o.activeList?((0,n.wg)(),(0,n.j4)(l,{key:0})):2==o.activeList?((0,n.wg)(),(0,n.j4)(r,{key:1,onModalActive:c.modalActive,isModalActive:o.isModalActive},null,8,["onModalActive","isModalActive"])):(0,n.kq)("",!0),o.isModalActive?((0,n.wg)(),(0,n.j4)(p,{key:2,couponData:o.couponData},{default:(0,n.w5)((()=>[(0,n.Wm)(u,{onCloseModal:e[0]||(e[0]=t=>o.isModalActive=!1),couponData:o.couponData},null,8,["couponData"])])),_:1},8,["couponData"])):(0,n.kq)("",!0)])}var o=a(7139);const c={class:"mypage-scrap"},i=(0,n._)("h1",null,"예정된 원정",-1),l={class:"card__wrapper--column"},r={class:"card__title"},u={class:"card__text"};function p(t,e,a,s,p,d){return(0,n.wg)(),(0,n.iD)("div",c,[(0,n._)("header",null,[i,(0,n._)("span",null,(0,o.zw)(p.scrapList.length),1)]),(0,n._)("div",l,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(p.scrapList,(t=>((0,n.wg)(),(0,n.iD)("div",{key:t,class:"card"},[(0,n._)("span",r,(0,o.zw)(t.name),1),(0,n._)("span",u,(0,o.zw)(t.addr),1)])))),128))])])}var d=a(5140),m={created(){this.fetchScrapList()},data(){return{scrapList:[]}},methods:{async fetchScrapList(){try{console.log("마이페이지 - 내가 스크랩 한 리스트 조회");const{scrapList:t}=await(0,d.AJ)();this.scrapList=t.body.cafes,console.log(this.scrapLists)}catch(t){console.log(t.message)}}}},_=a(89);const f=(0,_.Z)(m,[["render",p]]);var g=f;const v={class:"mypage-membership"},h={class:"mypage-stamp"},w=(0,n._)("h1",null,"내가 모은 스탬프",-1),D={class:"card__wrapper--column"},y={class:"card__title"},k={class:"stamp-list"},b={class:"stamp-list"},C={class:"mypage-coupon"},L=(0,n._)("h1",null,"내가 모은 쿠폰",-1),A={class:"card__wrapper--column"},M=["onClick"],x={class:"card__text"},j={class:"card__text"};function z(t,e,a,s,c,i){return(0,n.wg)(),(0,n.iD)("div",v,[(0,n._)("div",h,[(0,n._)("header",null,[w,(0,n._)("span",null,(0,o.zw)(c.stampData.length),1)]),(0,n._)("div",D,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(c.stampData,((t,e)=>((0,n.wg)(),(0,n.iD)("div",{key:e,class:"card"},[(0,n._)("span",y,(0,o.zw)(t.cafe_name),1),(0,n._)("div",k,[((0,n.wg)(),(0,n.iD)(n.HY,null,(0,n.Ko)(10,(t=>(0,n._)("i",{key:t,class:"fas fa-stroopwafel fa-3x"}))),64))]),(0,n._)("div",b,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(c.stampData[e].stamp_count,(t=>((0,n.wg)(),(0,n.iD)("i",{key:t,class:"fas fa-stroopwafel fa-3x stampActive"})))),128))])])))),128))])]),(0,n._)("div",C,[(0,n._)("header",null,[L,(0,n._)("span",null,(0,o.zw)(c.couponData.length),1)]),(0,n._)("div",A,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(c.couponData,((t,e)=>((0,n.wg)(),(0,n.iD)("div",{key:e,class:"card"},[(0,n._)("span",{onClick:t=>i.modalActive(e),class:"card__title"},(0,o.zw)(t.cafe_name),9,M),(0,n._)("span",x,(0,o.zw)(t.benefit),1),(0,n._)("span",j,(0,o.zw)(t.expire_date),1)])))),128))])])])}var $=a(1955),S={data(){return{coupons:{cafe_name:"엔드테라스",benefit:"아메리카노(HOT/ICE) 1잔 무료",expire_date:"2022-0411 ~ 2022-05-11"},stampData:[{cafe_name:"엔드테라스",stamp_count:3},{cafe_name:"엔드테라스",stamp_count:2}],couponData:[{id:1,cafe_name:"엔드테라스",benefit:"아메리카노(HOT/ICE) 1잔 무료",expire_date:"2022-04-11 ~ 2022-05-11"},{id:2,cafe_name:"메가 커피",benefit:"아메리카노(HOT/ICE) 1잔 무료",expire_date:"2022-04-11 ~ 2022-05-11"}]}},created(){this.fetchStamps(),this.fetchCoupons()},methods:{modalActive(t){let e=!0,a=this.couponData[t];this.$emit("modalActive",e,a)},async fetchStamps(){try{console.log("스탬프 조회");const{stampData:t}=await(0,$.$F)();this.stampData=t.body.stamps,console.log(this.stampData)}catch(t){console.log(t.message)}},async fetchCoupons(){try{console.log("쿠폰 조회");const{couponData:t}=await(0,$.VN)();this.couponData=t.body.coupons,console.log(this.couponData)}catch(t){console.log(t.message)}}}};const U=(0,_.Z)(S,[["render",z]]);var H=U,I=a(1142),Z=a(9242);const V={class:"content-mypage"},K={class:"btn__close"},Y=["src"],R={class:"content__wrapper"},E={class:"content__wrapper--text"},F=["src"],O={class:"card__title"},T={class:"card__text--benefit"},W={class:"card__text--expire"},q=["disabled"];function G(t,e,a,s,c,i){return(0,n.wg)(),(0,n.iD)("div",V,[(0,n._)("div",K,[(0,n._)("button",{type:"button",class:"btn--transparent",onClick:e[0]||(e[0]=e=>t.$emit("close-modal"))},[(0,n._)("img",{src:c.ic__close},null,8,Y)])]),(0,n._)("div",R,[(0,n._)("div",E,[(0,n._)("img",{src:c.ic__ticket},null,8,F),(0,n._)("span",O,(0,o.zw)(a.couponData.cafe_name),1),(0,n._)("span",T,(0,o.zw)(a.couponData.benefit),1),(0,n._)("span",W,(0,o.zw)(a.couponData.expire_date),1)]),(0,n.wy)((0,n._)("input",{placeholder:"사장님 아이디를 입력하세요.","onUpdate:modelValue":e[1]||(e[1]=t=>c.ownerId=t)},null,512),[[Z.nr,c.ownerId]]),(0,n._)("button",{type:"button",class:(0,o.C_)(["btn--md",i.isValid?"btnPrimary":"btnDisabled"]),disabled:0==i.isValid,onClick:e[2]||(e[2]=(...t)=>i.useCoupon&&i.useCoupon(...t))}," 사용하기 ",10,q)])])}var J=a(8391),N=a.p+"img/ticket.6fcdceec.svg",B={name:"ModalContent",props:{msg:String,couponData:[]},created(){console.log("쿠폰 데이터",this.couponData)},data(){return{ic__close:J,ic__ticket:N,ownerId:""}},computed:{isValid(){return""!=this.ownerId}},methods:{addReport(){this.$emit("close-modal")},modifyReport(){this.$emit("close-modal")},async useCoupon(){try{console.log("쿠폰 사용");const{data:t}=await(0,$.GR)(this.couponData.id);console.log(t.message),this.$emit("close-modal")}catch(t){console.log(t.message),this.$emit("close-modal")}}}};const P=(0,_.Z)(B,[["render",G]]);var X=P,Q={components:{ScrapedListComponent:g,CouponListComponent:H,ModalComponent:I.Z,CouponModalContent:X},data(){return{message:"",activeList:1,isModalActive:!1,couponData:[]}},methods:{setMessage(t){this.message=t},showList(t){this.activeList=t},modalActive(t,e){this.isModalActive=t,this.couponData=e}},created(){let t=!1;this.$store.commit("isHeaderActive",t)}};const tt=(0,_.Z)(Q,[["render",s]]);var et=tt},8391:function(t,e,a){t.exports=a.p+"img/close.a59852f9.svg"}}]);
//# sourceMappingURL=121.7e517ef6.js.map