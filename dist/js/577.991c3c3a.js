"use strict";(self["webpackChunkcroffle_frontend"]=self["webpackChunkcroffle_frontend"]||[]).push([[577],{797:function(e,n,t){t.d(n,{UB:function(){return o},j2:function(){return a}});var r=t(3376);function a(e){return r.eE.get(`cafe?id=${e}`)}function o(e){return r.eE.get(`cafe/search?name=${e}`)}},3376:function(e,n,t){t.d(n,{eE:function(){return u},Uj:function(){return l},yC:function(){return h}});var r=t(6265),a=t.n(r),o=t(5008);function s(e){return e.interceptors.request.use((function(e){return console.log(e),e.headers.Authorization=`Bearer ${(0,o.cd)()}`,e}),(function(e){return Promise.reject(e)})),e.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),e}function i(){return a().create({baseURL:"192.168.0.17:8080/"})}function c(){const e=a().create({baseURL:"/api"});return s(e)}const u=i(),l=c();function f(){return a().create({baseURL:"/v1/search",headers:{"X-Naver-Client-Id":"WDBUTDGAh6YGJ6Umihxr","X-Naver-Client-Secret":"Vjn2nII5K3"}})}function d(){const e=a().create({baseURL:"/v4"});return s(e)}function p(){const e=Math.floor(+new Date).toString(),n=a().create({baseURL:"/v3/geolocation/v2",headers:{"x-ncp-apigw-timestamp":e,"x-ncp-iam-access-key":"wnm6dyQfAzJLgs1r8r9I","x-ncp-apigw-signature-v2":"l9RFKQeUe3n09f4cu2m6CWyayyoC0p5jgrPXerDf"}});return n}function m(){const e=a().create({baseURL:"/v2"});return e}const h=f();p(),d(),m()},3844:function(e,n,t){t.r(n),t.d(n,{default:function(){return J}});var r=t(3396),a=t(7139);const o={key:0,class:"search"},s={key:1},i=["src"],c={key:0,class:"infoWindow"},u={class:"map__wrapper"},l=(0,r._)("p",{class:"guide",id:"guide"},[(0,r.Uk)(" 원정대에게 알려주고 싶은 카페가 있나요?"),(0,r._)("br"),(0,r.Uk)(" 카페를 찾아 크로플 원정대에 제보해주세요! ")],-1);function f(e,n,t,f,d,p){const m=(0,r.up)("searchbar-component"),h=(0,r.up)("not-registered-cafe"),g=(0,r.up)("cafe-list-component"),v=(0,r.up)("naver-marker"),w=(0,r.up)("naver-info-window"),k=(0,r.up)("naver-maps");return(0,r.wg)(),(0,r.iD)("div",null,[(0,r.Wm)(m,{onShowResult:p.showResult,onFetchInfo:p.fetchInfo,onFetchResult:p.fetchResult,service:d.service,registered:d.registered},null,8,["onShowResult","onFetchInfo","onFetchResult","service","registered"]),0==d.service?((0,r.wg)(),(0,r.iD)("div",o,[0==d.registered?((0,r.wg)(),(0,r.j4)(h,{key:0,onClosePage:n[0]||(n[0]=e=>d.service=!0)})):(0,r.kq)("",!0),1==d.registered?((0,r.wg)(),(0,r.j4)(g,{key:1,onClosePage:n[1]||(n[1]=e=>d.service=!0)})):(0,r.kq)("",!0)])):(0,r.kq)("",!0),1==d.service?((0,r.wg)(),(0,r.iD)("div",s,[(0,r.Wm)(k,{width:"100%",height:"100vh",class:"main-container--map",onOnLoad:n[4]||(n[4]=n=>e.onLoadMap(d.cafes))},{default:(0,r.w5)((()=>[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(d.cafes,((t,o)=>((0,r.wg)(),(0,r.j4)(v,{key:o,latitude:t.mapy,longitude:t.mapx,onOnLoad:n[2]||(n[2]=n=>e.onLoadMarker(n)),onClick:e=>p.openInfo(o)},{default:(0,r.w5)((()=>[(0,r._)("img",{src:d.ic__marker},null,8,i),d.isWindowOpen?((0,r.wg)(),(0,r.iD)("div",c,(0,a.zw)(t[o].id),1)):(0,r.kq)("",!0)])),_:2},1032,["latitude","longitude","onClick"])))),128)),(0,r.Wm)(w,{marker:e.marker,isOpen:e.isOpen,onOnLoad:n[3]||(n[3]=n=>e.onLoadInfoWindow(e.event))},null,8,["marker","isOpen"])])),_:1}),(0,r._)("div",u,[l,(0,r._)("button",{type:"button",onClick:n[5]||(n[5]=(...e)=>p.toCafeReport&&p.toCafeReport(...e)),class:"btn--primary",id:"btn-report"}," 제보하기 + ")])])):(0,r.kq)("",!0)])}var d=t.p+"img/speechBubble.a260e7b2.svg",p=t.p+"img/marker.22f42703.svg",m=t(6265),h=t.n(m);const g={id:"not-regi-cafe",class:"container"},v=(0,r._)("i",{class:"fas fa-arrow-left fa-2x"},null,-1),w=[v],k=(0,r._)("p",null,[(0,r.Uk)(" 아직 등록되지 않은 카페네요."),(0,r._)("br"),(0,r.Uk)(" 조금만 기다려 주세요! ")],-1);function _(e,n,t,a,o,s){return(0,r.wg)(),(0,r.iD)("div",g,[(0,r._)("button",{onClick:n[0]||(n[0]=n=>e.$emit("close-page"))},w),k])}var b={},y=t(89);const C=(0,y.Z)(b,[["render",_]]);var L=C;const R={id:"cafe-list",class:"container"},I={class:"card__wrapper--column"},U={class:"text__name"},D={class:"text__addr"},$=(0,r._)("i",{class:"far fa-times-circle fa-2x"},null,-1),x=[$];function O(e,n,t,o,s,i){return(0,r.wg)(),(0,r.iD)("div",R,[(0,r._)("div",I,[((0,r.wg)(!0),(0,r.iD)(r.HY,null,(0,r.Ko)(t.cafeList,(e=>((0,r.wg)(),(0,r.iD)("div",{key:e.id,class:"cafe__card"},[(0,r._)("span",U,(0,a.zw)(e.name),1),(0,r._)("span",D,(0,a.zw)(e.addr),1)])))),128))]),(0,r._)("button",{onClick:n[0]||(n[0]=n=>e.$emit("close-page"))},x)])}var W={data(){return{}},props:{cafeList:[{name:"카페 이름1",addr:"주소1"},{name:"카페 이름2",addr:"주소2"}]}};const j=(0,y.Z)(W,[["render",O]]);var S=j,M=t(9242);const q={id:"searchbar"},F={class:"input__box"},H=["src"];function A(e,n,t,a,o,s){return(0,r.wg)(),(0,r.iD)("div",q,[(0,r._)("div",F,[(0,r.wy)((0,r._)("input",{placeholder:"크로플 원정을 떠날 카페를 검색해주세요.","onUpdate:modelValue":n[0]||(n[0]=e=>o.name=e)},null,512),[[M.nr,o.name]]),(0,r._)("button",{type:"button",onClick:n[1]||(n[1]=(...e)=>s.searchCafe&&s.searchCafe(...e))},[(0,r._)("img",{src:o.ic_magnifier},null,8,H)])])])}var B=t.p+"img/position.c2587f93.svg",K=t.p+"img/magnifier.ba2bdae4.svg",N=t(797),z={data(){return{ic_position:B,ic_magnifier:K,address:"서울특별시 성북구",name:"",cafeInfo:[]}},methods:{async searchCafe(){const e=!1;this.$emit("showResult",e);try{console.log("등록된 카페 여부 검색");const{cafeData:e}=await(0,N.UB)(this.name);if("4040"==e.code){const e=!1;this.$emit("fetchResult",e)}else{const n=!1;this.$emit("fetchResult",n,e)}}catch(n){console.log(n)}}}};const P=(0,y.Z)(z,[["render",A]]);var Z=P,E=t(4870),T=t(8960),X=t(5008),Y={components:{SearchbarComponent:Z,NaverMaps:T.K0,NaverMarker:T.At,NaverInfoWindow:T._T,NotRegisteredCafe:L,CafeListComponent:S},setup:()=>{const e=(0,E.iH)(),n=(0,E.iH)(),t=(0,E.iH)(),r=(0,E.iH)(!1),a=e=>{t.value=e},o=e=>{n.value=e},s=e=>{console.log("cafes",e),e=e.map((e=>(window.naver.maps.Service.geocode({address:e.addr},(function(n,t){if(n!==window.naver.maps.Service.Status.OK)return alert("Something wrong!");var r=t.result;console.log("도로명 주소->좌표 반환결과",r.items[0].point),e.mapx=parseFloat(r.items[0].point.x),e.mapy=parseFloat(r.items[0].point.y)})),console.log("카페 도로명 주소",e),e)))};return{onLoadMarker:o,map:e,marker:n,onLoadMap:s,isOpen:r,onLoadInfoWindow:a}},mounted(){this.fetchCafes();const e=this.$route.query.token;console.log("token",e),this.$store.commit("setToken",e),(0,X.aZ)(e)},async created(){let e=!0;this.$store.commit("isHeaderActive",e)},data(){return{registered:!1,ic__speechBubble:d,ic__marker:p,page:"main",clientIp:"",clientAddr:"",service:!0,email:"",cafeList:[],cafes:[],isWindowOpen:!1}},methods:{fetchInfo(e){this.cafeInfo=e},fetchResult(e,n){this.registered=e,this.cafeList=n},showResult(e){this.service=e},toCafeReport(){this.$router.push("/cafes/report")},async fetchCafes(){try{const{data:e}=await h().get("http://192.168.0.17:8080/cafes");console.log("카페 로그 찍기",e),this.cafes=e.data}catch(e){console.log(e)}},openInfo(e){this.$router.push(`/cafe/${e}`),console.log(e),this.isWindowOpen},openInfoWindow(e){console.log("jh cafe",this.marker,e),this.marker=new window.naver.maps.Marker({position:new window.naver.maps.LatLng(e.mapy,e.mapx),map:window.naver.maps}),this.isOpen=!this.isOpen}}};const G=(0,y.Z)(Y,[["render",f]]);var J=G}}]);
//# sourceMappingURL=577.991c3c3a.js.map