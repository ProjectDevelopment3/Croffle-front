"use strict";(self["webpackChunkcroffle_frontend"]=self["webpackChunkcroffle_frontend"]||[]).push([[252],{797:function(e,t,n){n.d(t,{UB:function(){return o},j2:function(){return r}});var a=n(3376);function r(e){return a.eE.get(`cafe?id=${e}`)}function o(e){return a.eE.get(`cafe/search?name=${e}`)}},3376:function(e,t,n){n.d(t,{eE:function(){return l},Uj:function(){return u},yC:function(){return v}});var a=n(6265),r=n.n(a),o=n(5008);function s(e){return e.interceptors.request.use((function(e){return console.log(e),e.headers.Authorization=`Bearer ${(0,o.cd)()}`,e}),(function(e){return Promise.reject(e)})),e.interceptors.response.use((function(e){return e}),(function(e){return Promise.reject(e)})),e}function c(){return r().create({baseURL:"192.168.0.17:8080/"})}function i(){const e=r().create({baseURL:"/api"});return s(e)}const l=c(),u=i();function d(){return r().create({baseURL:"/v1/search",headers:{"X-Naver-Client-Id":"WDBUTDGAh6YGJ6Umihxr","X-Naver-Client-Secret":"Vjn2nII5K3"}})}function f(){const e=r().create({baseURL:"/v4"});return s(e)}function _(){const e=Math.floor(+new Date).toString(),t=r().create({baseURL:"/v3/geolocation/v2",headers:{"x-ncp-apigw-timestamp":e,"x-ncp-iam-access-key":"wnm6dyQfAzJLgs1r8r9I","x-ncp-apigw-signature-v2":"l9RFKQeUe3n09f4cu2m6CWyayyoC0p5jgrPXerDf"}});return t}function p(){const e=r().create({baseURL:"/v2"});return e}const v=d();_(),f(),p()},5140:function(e,t,n){n.d(t,{AF:function(){return r},AJ:function(){return s},Xp:function(){return o}});var a=n(3376);function r(e){return a.Uj.post("like",e)}function o(e){return a.Uj.post("like/del",e)}function s(){return a.Uj.get("likes")}},7516:function(e,t,n){n.d(t,{X:function(){return r},o:function(){return o}});var a=n(3376);function r(e){return a.Uj.post("review",e)}function o(e){return a.eE.get(`review/${e}`)}},4252:function(e,t,n){n.r(t),n.d(t,{default:function(){return G}});var a=n(3396),r=n(7139);const o={id:"cafe-page"},s={class:"cafe-info"},c={class:"cafe__name"},i={class:"cafe__address"},l=(0,a.Uk)(" 좋아요 "),u={class:"cafe-info__detail"},d={class:"cafe-info__wrapper"},f=(0,a._)("label",null,"전화번호",-1),_={class:"cafe-info__wrapper"},p=(0,a._)("label",null,"운영시간",-1),v={class:"cafe-info__wrapper"},m=(0,a._)("label",null,"SNS",-1),h={id:"cafe-menu"},w=(0,a._)("span",null,"메뉴",-1),g=(0,a._)("p",{class:"guide"},[(0,a.Uk)(" 아래 버튼을 눌러 크로플 메뉴 추가 제보 또는"),(0,a._)("br"),(0,a.Uk)(" 카페 정보 수정 제보를 해주세요! ")],-1),k={class:"menu__list"},b={class:"menus__name"},y={class:"menus__price"},D={class:"review__wrapper"},$=(0,a.Uk)("리뷰  "),C={class:"card__info"},I={class:"card__user"},U={class:"text__nickname"},R={class:"text__date"},z={class:"rate__stars"},j={class:"text__content"};function A(e,t,n,A,L,x){const M=(0,a.up)("modal-content"),F=(0,a.up)("modal-component");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",o,[(0,a._)("div",s,[(0,a._)("span",c,(0,r.zw)(L.cafeInfo.name),1),(0,a._)("span",i,(0,r.zw)(L.cafeInfo.roadaddr),1),(0,a._)("button",{type:"button",class:"cafe__btn-like",onClick:t[0]||(t[0]=(...e)=>x.scrapCafe&&x.scrapCafe(...e))},[l,(0,a._)("i",{class:(0,r.C_)(["fa-heart",L.liked?"fas":"far"])},null,2)])]),(0,a._)("div",u,[(0,a._)("div",d,[f,(0,a._)("span",null,(0,r.zw)(L.cafeInfo.telephone),1)]),(0,a._)("div",_,[p,(0,a._)("span",null,(0,r.zw)(L.cafeInfo.hours),1)]),(0,a._)("div",v,[m,(0,a._)("span",null,(0,r.zw)(L.cafeInfo.site),1)])])]),(0,a._)("div",h,[w,g,(0,a._)("div",k,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(L.cafeInfo.menus,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"menu-info__wrapper",key:e},[(0,a._)("span",b,(0,r.zw)(L.cafeInfo.menuListDtos.name),1),(0,a._)("span",y,(0,r.zw)(L.cafeInfo.menuListDtos.price),1)])))),128))])]),(0,a._)("button",{type:"button",onClick:t[1]||(t[1]=e=>L.isModalActive=!0),class:"btn--primary"}," 제보하기 + "),(0,a._)("div",D,[(0,a._)("span",null,[$,(0,a._)("strong",null,(0,r.zw)(L.reviewData.length),1)]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(L.reviewData,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:"review__card"},[(0,a._)("div",C,[(0,a._)("div",I,[(0,a._)("div",U,(0,r.zw)(e.author),1),(0,a._)("div",R,(0,r.zw)(e.createdDate),1)]),(0,a._)("div",z,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(L.reviewData[t].rate,(e=>((0,a.wg)(),(0,a.iD)("i",{key:e,class:"fas fa-star fa-1x"})))),128))]),(0,a._)("div",j,(0,r.zw)(e.content),1)])])))),128))]),(0,a._)("button",{type:"button",onClick:t[2]||(t[2]=(...e)=>x.toReviewForm&&x.toReviewForm(...e)),class:"btn--border"}," 리뷰 작성하기 + "),L.isModalActive?((0,a.wg)(),(0,a.j4)(F,{key:0},{default:(0,a.w5)((()=>[(0,a.Wm)(M,{onCloseModal:t[3]||(t[3]=e=>L.isModalActive=!1)})])),_:1})):(0,a.kq)("",!0)])}var L=n(1142);const x={class:"content"},M={class:"btn__close"},F=["src"],X=(0,a._)("h1",null,"무엇을 제보하시나요?",-1),K={class:"btn__wrapper"};function S(e,t,n,r,o,s){return(0,a.wg)(),(0,a.iD)("div",x,[(0,a._)("div",M,[(0,a._)("button",{type:"button",class:"btn--transparent",onClick:t[0]||(t[0]=t=>e.$emit("close-modal"))},[(0,a._)("img",{src:o.ic__close},null,8,F)])]),X,(0,a._)("div",K,[(0,a._)("button",{type:"button",class:"btn--secondary",onClick:t[1]||(t[1]=(...e)=>s.addReport&&s.addReport(...e))}," 크로플 메뉴 추가 제보 "),(0,a._)("button",{type:"button",class:"btn--negative",onClick:t[2]||(t[2]=(...e)=>s.reportInfo&&s.reportInfo(...e))}," 카페 정보 수정 제보 ")])])}var Z=n(8391),E={name:"ModalContent",props:{msg:String},data(){return{ic__close:Z}},methods:{addReport(){this.$emit("close-modal"),this.$router.push(`/cafe/${this.$route.params.id}/addreport`)},reportInfo(){this.$emit("close-modal"),this.$router.push(`/cafe/${this.$route.params.id}/reportinfo`)}}},H=n(89);const J=(0,H.Z)(E,[["render",S]]);var W=J,Y=n(5140),B=n(7516),N=n(797),P={created(){this.fetchCafeInfo()},components:{ModalComponent:L.Z,ModalContent:W},data(){return{isModalActive:!1,isHeaderActive:!0,liked:!1,reviewData:[{author:"씽씽",createdDate:"2022.04.01",content:"냉동 생지 사다가 만드는게 아니라 사장님이 직접 만든 반죽으로 하심",rate:3},{author:"씽씽",createdDate:"2022.04.01",content:"냉동 생지 사다가 만드는게 아니라 사장님이 직접 만든 반죽으로 하심",rate:2}],cafeInfo:{id:0,name:"밀크북",roadaddr:"서울특별시 성북구 80로 ",telephone:"02-345-6720",hours:"오전 10시 부터 오후 8시 까지",site:"",menuListDtos:[{menuId:5,cafeId:1,name:"테스트 메뉴1",price:"테스트 가격1"}]}}},methods:{toReviewForm(){this.$router.push(`/cafe/${this.$route.params.id}/review`)},async fetchReview(){console.log("리뷰 조회");try{const e=await(0,B.o)(this.$route.params.id);this.reviewsData=e.data}catch(e){console.log(e)}},async checkLike(){try{const{likedData:e}=await(0,Y.AJ)();e.some((function(e){return e.id==this.$route.params.id?this.liked=!0:this.liked=!1}))}catch(e){console.log(e)}},async scrapCafe(){if(""==this.$store.state.token||"undefined"==this.$store.state.token)alert("로그인이 필요한 기능입니다.");else if(0==this.liked)try{console.log("좋아요"),await(0,Y.AF)(this.$route.params.id),this.liked=!this.liked}catch(e){console.log(e.message)}else try{console.log("좋아요 취소"),await(0,Y.Xp)(this.$route.params.id),this.liked=!this.liked}catch(e){console.log(e.message)}},async fetchCafeInfo(){try{console.log("카페 상세정보 조회");const{data:e}=await(0,N.j2)(this.$route.params.id);this.cafeInfo=e.data}catch(e){console.log(e.message)}}}};const q=(0,H.Z)(P,[["render",A]]);var G=q},1142:function(e,t,n){n.d(t,{Z:function(){return d}});var a=n(3396);const r={class:"modal"},o=(0,a._)("div",{class:"overlay"},null,-1),s={class:"modal-card"};function c(e,t,n,c,i,l){return(0,a.wg)(),(0,a.iD)("div",r,[o,(0,a._)("div",s,[(0,a.WI)(e.$slots,"default")])])}var i={props:{couponData:[]}},l=n(89);const u=(0,l.Z)(i,[["render",c]]);var d=u},8391:function(e,t,n){e.exports=n.p+"img/close.a59852f9.svg"}}]);
//# sourceMappingURL=252.f1c7fad8.js.map