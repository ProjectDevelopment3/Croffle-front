"use strict";(self["webpackChunkcroffle_frontend"]=self["webpackChunkcroffle_frontend"]||[]).push([[731],{797:function(e,t,n){n.d(t,{Dk:function(){return o},UB:function(){return r},j2:function(){return s}});var a=n(3376);function o(){return a.eE.get("cafes")}function s(e){return a.eE.get(`cafe?id=${e}`)}function r(e){return a.eE.get(`cafe/search?name=${e}`)}},5140:function(e,t,n){n.d(t,{AF:function(){return o},AJ:function(){return r},Xp:function(){return s}});var a=n(3376);function o(e){return a.Uj.post("like",e)}function s(e){return a.Uj.post("like/del",e)}function r(){return a.Uj.get("likes")}},7516:function(e,t,n){n.d(t,{X:function(){return o},o:function(){return s}});var a=n(3376);function o(e){return a.Uj.post("review",e)}function s(e){return a.eE.get(`review/${e}`)}},3731:function(e,t,n){n.r(t),n.d(t,{default:function(){return P}});var a=n(3396),o=n(7139);const s={id:"cafe-page"},r={class:"cafe-info"},c={class:"cafe__name"},i={class:"cafe__address"},l=(0,a.Uk)(" 좋아요 "),u={class:"cafe-info__detail"},d={class:"cafe-info__wrapper"},f=(0,a._)("label",null,"전화번호",-1),_={class:"cafe-info__wrapper"},p=(0,a._)("label",null,"운영시간",-1),v={class:"cafe-info__wrapper"},m=(0,a._)("label",null,"SNS",-1),w=(0,a._)("p",{class:"guide"},[(0,a.Uk)(" 이 가게에서 크로플을 파나요?"),(0,a._)("br"),(0,a.Uk)(" 원정대를 위해 제보해주세요! ")],-1),h={id:"cafe-menu"},k=(0,a._)("span",null,"메뉴",-1),g=(0,a._)("p",{class:"guide"},[(0,a.Uk)(" 아래 버튼을 눌러 크로플 메뉴 추가 제보 또는"),(0,a._)("br"),(0,a.Uk)(" 카페 정보 수정 제보를 해주세요! ")],-1),b={class:"menu__list"},$={class:"menus__name"},y={class:"menus__price"},C={class:"review__wrapper"},D=(0,a.Uk)("리뷰  "),I={class:"card__info"},z={class:"card__user"},U={class:"text__nickname"},A={class:"text__date"},M={class:"rate__stars"},j={class:"text__content"};function R(e,t,n,R,x,F){const Z=(0,a.up)("modal-content"),E=(0,a.up)("modal-component");return(0,a.wg)(),(0,a.iD)("div",null,[(0,a._)("div",s,[(0,a._)("div",r,[(0,a._)("span",c,(0,o.zw)(x.cafeInfo.name),1),(0,a._)("span",i,(0,o.zw)(x.cafeInfo.roadaddr),1),(0,a._)("button",{type:"button",class:"cafe__btn-like",onClick:t[0]||(t[0]=(...e)=>F.scrapCafe&&F.scrapCafe(...e))},[l,(0,a._)("i",{class:(0,o.C_)(["fa-heart",x.liked?"fas":"far"])},null,2)])]),(0,a._)("div",u,[(0,a._)("div",d,[f,(0,a._)("span",null,(0,o.zw)(x.cafeInfo.telephone),1)]),(0,a._)("div",_,[p,(0,a._)("span",null,(0,o.zw)(x.cafeInfo.hours),1)]),(0,a._)("div",v,[m,(0,a._)("span",null,(0,o.zw)(x.cafeInfo.site),1)])]),w]),(0,a._)("div",h,[k,g,(0,a._)("div",b,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(x.cafeInfo.menus,(e=>((0,a.wg)(),(0,a.iD)("div",{class:"menu-info__wrapper",key:e},[(0,a._)("span",$,(0,o.zw)(x.cafeInfo.menus.name),1),(0,a._)("span",y,(0,o.zw)(x.cafeInfo.menus.price),1)])))),128))])]),(0,a._)("button",{type:"button",onClick:t[1]||(t[1]=e=>x.isModalActive=!0),class:"btn--primary"}," 제보하기 + "),(0,a._)("div",C,[(0,a._)("span",null,[D,(0,a._)("strong",null,(0,o.zw)(x.reviewData.length),1)]),((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(x.reviewData,((e,t)=>((0,a.wg)(),(0,a.iD)("div",{key:t,class:"review__card"},[(0,a._)("div",I,[(0,a._)("div",z,[(0,a._)("div",U,(0,o.zw)(e.author),1),(0,a._)("div",A,(0,o.zw)(e.createdate),1)]),(0,a._)("div",M,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(x.reviewData[t].rate,(e=>((0,a.wg)(),(0,a.iD)("i",{key:e,class:"fas fa-star fa-1x"})))),128))]),(0,a._)("div",j,(0,o.zw)(e.content),1)])])))),128))]),(0,a._)("button",{type:"button",onClick:t[2]||(t[2]=(...e)=>F.toReviewForm&&F.toReviewForm(...e)),class:"btn--border"}," 리뷰 작성하기 + "),x.isModalActive?((0,a.wg)(),(0,a.j4)(E,{key:0},{default:(0,a.w5)((()=>[(0,a.Wm)(Z,{onCloseModal:t[3]||(t[3]=e=>x.isModalActive=!1)})])),_:1})):(0,a.kq)("",!0)])}var x=n(1142);const F={class:"content"},Z={class:"btn__close"},E=["src"],H=(0,a._)("h1",null,"무엇을 제보하시나요?",-1),K={class:"btn__wrapper"};function S(e,t,n,o,s,r){return(0,a.wg)(),(0,a.iD)("div",F,[(0,a._)("div",Z,[(0,a._)("button",{type:"button",class:"btn--transparent",onClick:t[0]||(t[0]=t=>e.$emit("close-modal"))},[(0,a._)("img",{src:s.ic__close},null,8,E)])]),H,(0,a._)("div",K,[(0,a._)("button",{type:"button",class:"btn--secondary",onClick:t[1]||(t[1]=(...e)=>r.addReport&&r.addReport(...e))}," 크로플 메뉴 추가 제보 "),(0,a._)("button",{type:"button",class:"btn--negative",onClick:t[2]||(t[2]=(...e)=>r.reportInfo&&r.reportInfo(...e))}," 카페 정보 수정 제보 ")])])}var X=n(8391),Y={name:"ModalContent",props:{msg:String},data(){return{ic__close:X}},methods:{addReport(){this.$emit("close-modal"),this.$router.push(`/cafe/${this.$route.params.id}/addreport`)},reportInfo(){this.$emit("close-modal"),this.$router.push(`/cafe/${this.$route.params.id}/reportinfo`)}}},J=n(89);const W=(0,J.Z)(Y,[["render",S]]);var q=W,B=n(5140),L=n(7516),N=n(797),G={created(){},mounted(){console.log("route",this.$route),console.log("mounted id:",this.$route.params.id)},components:{ModalComponent:x.Z,ModalContent:q},data(){return{cafeId:"cafeId",isModalActive:!1,isHeaderActive:!0,liked:!1,reviewData:[{nickname:"씽씽",date:"2022.04.01",content:"냉동 생지 사다가 만드는게 아니라 사장님이 직접 만든 반죽으로 하심",rate:3},{nickname:"씽씽",date:"2022.04.01",content:"냉동 생지 사다가 만드는게 아니라 사장님이 직접 만든 반죽으로 하심",rate:2}],cafeInfo:[]}},methods:{toReviewForm(){this.$router.push(`/cafe/${this.$route.params.id}/review`)},async fetchReview(){console.log("리뷰 조회");try{const e=await(0,L.o)(this.$route.params.id);this.reviewsData=e.reviews}catch(e){console.log(e)}},async checkLike(){try{const{likedData:e}=await B.AJ;e.some((function(e){return e.id==this.$route.params.id?this.liked=!0:this.liked=!1}))}catch(e){console.log(e)}},async scrapCafe(){if(0==this.liked)try{console.log("좋아요"),await(0,B.AF)(this.$route.params.id),this.liked=!this.liked}catch(e){console.log(e.message)}else try{console.log("좋아요 취소"),await(0,B.Xp)(this.$route.params.id),this.liked=!this.liked}catch(e){console.log(e.message)}},async fetchCafeInfo(){try{console.log("카페 상세정보 조회");const{data:e}=await(0,N.j2)(this.$route.params.id);this.cafeInfo=e.data}catch(e){console.log(e.message)}}}};const O=(0,J.Z)(G,[["render",R]]);var P=O},1142:function(e,t,n){n.d(t,{Z:function(){return d}});var a=n(3396);const o={class:"modal"},s=(0,a._)("div",{class:"overlay"},null,-1),r={class:"modal-card"};function c(e,t,n,c,i,l){return(0,a.wg)(),(0,a.iD)("div",o,[s,(0,a._)("div",r,[(0,a.WI)(e.$slots,"default")])])}var i={props:{couponData:[]}},l=n(89);const u=(0,l.Z)(i,[["render",c]]);var d=u},8391:function(e,t,n){e.exports=n.p+"img/close.a59852f9.svg"}}]);
//# sourceMappingURL=731.56538865.js.map