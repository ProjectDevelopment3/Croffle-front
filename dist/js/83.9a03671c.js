"use strict";(self["webpackChunkcroffle_frontend"]=self["webpackChunkcroffle_frontend"]||[]).push([[83],{1142:function(t,a,e){e.d(a,{Z:function(){return p}});var s=e(3396);const o={class:"modal"},c=(0,s._)("div",{class:"overlay"},null,-1),n={class:"modal-card"};function i(t,a,e,i,l,r){return(0,s.wg)(),(0,s.iD)("div",o,[c,(0,s._)("div",n,[(0,s.WI)(t.$slots,"default")])])}var l={props:{couponData:[]}},r=e(89);const d=(0,r.Z)(l,[["render",i]]);var p=d},2389:function(t,a,e){e.r(a),e.d(a,{default:function(){return st}});var s=e(3396);function o(t,a,e,o,c,n){const i=(0,s.up)("router-view"),l=(0,s.up)("scraped-list-component"),r=(0,s.up)("coupon-list-component"),d=(0,s.up)("coupon-modal-content"),p=(0,s.up)("modal-component");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(i,{onShowList:n.showList,activeList:c.activeList,onSetMessage:n.setMessage,message:c.message},null,8,["onShowList","activeList","onSetMessage","message"]),1==c.activeList?((0,s.wg)(),(0,s.j4)(l,{key:0})):2==c.activeList?((0,s.wg)(),(0,s.j4)(r,{key:1,onModalActive:n.modalActive,isModalActive:c.isModalActive},null,8,["onModalActive","isModalActive"])):(0,s.kq)("",!0),c.isModalActive?((0,s.wg)(),(0,s.j4)(p,{key:2,couponData:c.couponData},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{onCloseModal:a[0]||(a[0]=t=>c.isModalActive=!1),couponData:c.couponData},null,8,["couponData"])])),_:1},8,["couponData"])):(0,s.kq)("",!0)])}var c=e(7139);const n={class:"mypage-scrap"},i=(0,s._)("h1",null,"예정된 원정",-1),l={class:"card__wrapper--column"},r=["onClick"],d={class:"card__title"},p={class:"card__text"};function u(t,a,e,o,u,m){return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("header",null,[i,(0,s._)("span",null,(0,c.zw)(u.scrapList.length),1)]),(0,s._)("div",l,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(u.scrapList,((t,a)=>((0,s.wg)(),(0,s.iD)("div",{key:t,class:"card",onClick:t=>m.toCafeDetail(a)},[(0,s._)("span",d,(0,c.zw)(t.name),1),(0,s._)("span",p,(0,c.zw)(t.addr),1)],8,r)))),128))])])}var m=e(6265),_=e.n(m),h={created(){this.fetchScrapList()},data(){return{scrapList:[]}},methods:{async fetchScrapList(){try{console.log("마이페이지 - 내가 스크랩 한 리스트 조회");const{data:t}=await _().get(" http://34.64.32.174:8080/likes",{headers:{Authorization:`Bearer ${this.$store.state.token}`}});this.scrapList=t.data,console.log(this.scrapLists)}catch(t){console.log(t.message)}},toCafeDetail(t){this.$router.push(`/cafe/${this.scrapList[t].id}`)}}},g=e(89);const v=(0,g.Z)(h,[["render",u]]);var w=v;const f={class:"mypage-membership"},D={class:"mypage-stamp"},k=(0,s._)("h1",null,"내가 모은 스탬프",-1),y={class:"card__wrapper--column"},C={class:"card__title"},L={class:"stamp-list"},A={class:"stamp-list"},b={class:"mypage-coupon"},$=(0,s._)("h1",null,"내가 모은 쿠폰",-1),M={class:"card__wrapper--column"},z=["onClick"],x={class:"card__title"},S={class:"card__text"},I={class:"card__text"};function Z(t,a,e,o,n,i){return(0,s.wg)(),(0,s.iD)("div",f,[(0,s._)("div",D,[(0,s._)("header",null,[k,(0,s._)("span",null,(0,c.zw)(n.stampData.length),1)]),(0,s._)("div",y,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.stampData,((t,a)=>((0,s.wg)(),(0,s.iD)("div",{key:a,class:"card"},[(0,s._)("span",C,(0,c.zw)(t.cafeName),1),(0,s._)("div",L,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(10,(t=>(0,s._)("i",{key:t,class:"fas fa-stroopwafel fa-3x"}))),64))]),(0,s._)("div",A,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.stampData[a].stampCount,(t=>((0,s.wg)(),(0,s.iD)("i",{key:t,class:"fas fa-stroopwafel fa-3x stampActive"})))),128))])])))),128))])]),(0,s._)("div",b,[(0,s._)("header",null,[$,(0,s._)("span",null,(0,c.zw)(n.couponData.length),1)]),(0,s._)("div",M,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.couponData,((t,a)=>((0,s.wg)(),(0,s.iD)("div",{key:a,class:"card",onClick:t=>i.modalActive(a)},[(0,s._)("span",x,(0,c.zw)(t.cafeName),1),(0,s._)("span",S,(0,c.zw)(t.benefit),1),(0,s._)("span",I,(0,c.zw)(t.expiredDate),1)],8,z)))),128))])])])}var H={data(){return{coupons:{},stampData:[],couponData:[]}},created(){this.fetchStamps(),this.fetchCoupons()},methods:{modalActive(t){let a=!0,e=this.couponData[t];this.$emit("modalActive",a,e)},async fetchStamps(){try{console.log("스탬프 조회");const{stampData:t}=await _().get("http://34.64.32.174:8080/stamps",{headers:{Authorization:`Bearer ${this.$store.state.token}`}});this.stampData=t.data,console.log(this.stampData)}catch(t){console.log(t.message)}},async fetchCoupons(){try{console.log("쿠폰 조회");const{data:t}=await _().get("http://34.64.32.174:8080/coupons",{headers:{Authorization:`Bearer ${this.$store.state.token}`}});this.couponData=t.data,console.log(this.couponData)}catch(t){console.log(t.message)}}}};const K=(0,g.Z)(H,[["render",Z]]);var Y=K,j=e(1142),B=e(9242);const V={class:"content-mypage"},N={class:"btn__close"},W=["src"],q={class:"content__wrapper"},R={class:"content__wrapper--text"},O=["src"],P={class:"card__title"},U={class:"card__text--benefit"},E={class:"card__text--expire"},F=["disabled"];function G(t,a,e,o,n,i){return(0,s.wg)(),(0,s.iD)("div",V,[(0,s._)("div",N,[(0,s._)("button",{type:"button",class:"btn--transparent",onClick:a[0]||(a[0]=a=>t.$emit("close-modal"))},[(0,s._)("img",{src:n.ic__close},null,8,W)])]),(0,s._)("div",q,[(0,s._)("div",R,[(0,s._)("img",{src:n.ic__ticket},null,8,O),(0,s._)("span",P,(0,c.zw)(e.couponData.cafeName),1),(0,s._)("span",U,(0,c.zw)(e.couponData.benefit),1),(0,s._)("span",E,(0,c.zw)(e.couponData.expiredDate),1)]),(0,s.wy)((0,s._)("input",{placeholder:"사장님 아이디를 입력하세요.","onUpdate:modelValue":a[1]||(a[1]=t=>n.ownerId=t)},null,512),[[B.nr,n.ownerId]]),(0,s._)("button",{type:"button",class:(0,c.C_)(["btn--md",i.isValid?"btnPrimary":"btnDisabled"]),disabled:0==i.isValid,onClick:a[2]||(a[2]=(...t)=>i.useCoupon&&i.useCoupon(...t))}," 사용하기 ",10,F)])])}var J=e(8391),Q=e.p+"img/ticket.6fcdceec.svg",T={name:"ModalContent",props:{msg:String,couponData:Object},created(){console.log("쿠폰 데이터",this.couponData)},data(){return{ic__close:J,ic__ticket:Q,ownerId:""}},computed:{isValid(){return""!=this.ownerId}},methods:{addReport(){this.$emit("close-modal")},modifyReport(){this.$emit("close-modal")},async useCoupon(){try{console.log("쿠폰 사용");const{data:t}=await _()["delete"](` http://34.64.32.174:8080/coupon/use?couponId=${this.couponData.cafeId}`,{headers:{Authorization:`Bearer ${this.$store.state.token}`}});console.log(t.message),this.$emit("close-modal")}catch(t){console.log(t.message),this.$emit("close-modal")}}}};const X=(0,g.Z)(T,[["render",G]]);var tt=X,at={components:{ScrapedListComponent:w,CouponListComponent:Y,ModalComponent:j.Z,CouponModalContent:tt},data(){return{message:"",activeList:1,isModalActive:!1,couponData:[]}},methods:{setMessage(t){this.message=t},showList(t){this.activeList=t},modalActive(t,a){this.isModalActive=t,this.couponData=a}},created(){let t=!1;this.$store.commit("isHeaderActive",t)}};const et=(0,g.Z)(at,[["render",o]]);var st=et},8391:function(t,a,e){t.exports=e.p+"img/close.a59852f9.svg"}}]);
//# sourceMappingURL=83.9a03671c.js.map