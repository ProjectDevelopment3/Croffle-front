"use strict";(self["webpackChunkcroffle_frontend"]=self["webpackChunkcroffle_frontend"]||[]).push([[101],{1142:function(t,a,e){e.d(a,{Z:function(){return p}});var s=e(3396);const o={class:"modal"},c=(0,s._)("div",{class:"overlay"},null,-1),n={class:"modal-card"};function i(t,a,e,i,l,r){return(0,s.wg)(),(0,s.iD)("div",o,[c,(0,s._)("div",n,[(0,s.WI)(t.$slots,"default")])])}var l={props:{couponData:[]}},r=e(89);const d=(0,r.Z)(l,[["render",i]]);var p=d},6194:function(t,a,e){e.r(a),e.d(a,{default:function(){return st}});var s=e(3396);function o(t,a,e,o,c,n){const i=(0,s.up)("router-view"),l=(0,s.up)("scraped-list-component"),r=(0,s.up)("coupon-list-component"),d=(0,s.up)("coupon-modal-content"),p=(0,s.up)("modal-component");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(i,{onShowList:n.showList,activeList:c.activeList,onSetMessage:n.setMessage,message:c.message},null,8,["onShowList","activeList","onSetMessage","message"]),1==c.activeList?((0,s.wg)(),(0,s.j4)(l,{key:0})):2==c.activeList?((0,s.wg)(),(0,s.j4)(r,{key:1,onModalActive:n.modalActive,isModalActive:c.isModalActive},null,8,["onModalActive","isModalActive"])):(0,s.kq)("",!0),c.isModalActive?((0,s.wg)(),(0,s.j4)(p,{key:2,couponData:c.couponData},{default:(0,s.w5)((()=>[(0,s.Wm)(d,{onCloseModal:a[0]||(a[0]=t=>c.isModalActive=!1),couponData:c.couponData},null,8,["couponData"])])),_:1},8,["couponData"])):(0,s.kq)("",!0)])}var c=e(7139);const n={class:"mypage-scrap"},i=(0,s._)("h1",null,"예정된 원정",-1),l={class:"card__wrapper--column"},r=["onClick"],d={class:"card__title"},p={class:"card__text"};function u(t,a,e,o,u,m){return(0,s.wg)(),(0,s.iD)("div",n,[(0,s._)("header",null,[i,(0,s._)("span",null,(0,c.zw)(u.scrapList.length),1)]),(0,s._)("div",l,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(u.scrapList,((t,a)=>((0,s.wg)(),(0,s.iD)("div",{key:t,class:"card",onClick:t=>m.toCafeDetail(a)},[(0,s._)("span",d,(0,c.zw)(t.name),1),(0,s._)("span",p,(0,c.zw)(t.addr),1)],8,r)))),128))])])}var m=e(6265),_=e.n(m),h={created(){this.fetchScrapList()},data(){return{scrapList:[]}},methods:{async fetchScrapList(){try{console.log("마이페이지 - 내가 스크랩 한 리스트 조회");const{data:t}=await _().get(" http://34.64.32.174:8080/likes",{headers:{Authorization:`Bearer ${this.$store.state.token}`}});this.scrapList=t.data,console.log(this.scrapLists)}catch(t){console.log(t.message)}},toCafeDetail(t){this.$router.push(`/cafe/${this.scrapList[t].id}`)}}},g=e(89);const v=(0,g.Z)(h,[["render",u]]);var f=v;const w={class:"mypage-membership"},D={class:"mypage-stamp"},C=(0,s._)("h1",null,"내가 모은 스탬프",-1),k={class:"card__wrapper--column"},y={class:"card__title"},b={class:"stamp-list"},L={class:"stamp-list"},A={class:"mypage-coupon"},M=(0,s._)("h1",null,"내가 모은 쿠폰",-1),$={class:"card__wrapper--column"},x=["onClick"],z={class:"card__title"},I={class:"card__text"},S={class:"card__text"};function H(t,a,e,o,n,i){return(0,s.wg)(),(0,s.iD)("div",w,[(0,s._)("div",D,[(0,s._)("header",null,[C,(0,s._)("span",null,(0,c.zw)(n.stampData.length),1)]),(0,s._)("div",k,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.stampData,((t,a)=>((0,s.wg)(),(0,s.iD)("div",{key:a,class:"card"},[(0,s._)("span",y,(0,c.zw)(t.cafeName),1),(0,s._)("div",b,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(10,(t=>(0,s._)("i",{key:t,class:"fas fa-stroopwafel fa-3x"}))),64))]),(0,s._)("div",L,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.stampData[a].stampCount,(t=>((0,s.wg)(),(0,s.iD)("i",{key:t,class:"fas fa-stroopwafel fa-3x stampActive"})))),128))])])))),128))])]),(0,s._)("div",A,[(0,s._)("header",null,[M,(0,s._)("span",null,(0,c.zw)(n.couponData.length),1)]),(0,s._)("div",$,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(n.couponData,((t,a)=>((0,s.wg)(),(0,s.iD)("div",{key:a,class:"card",onClick:t=>i.modalActive(a)},[(0,s._)("span",z,(0,c.zw)(t.cafeName),1),(0,s._)("span",I,(0,c.zw)(t.benefit),1),(0,s._)("span",S,(0,c.zw)(t.expiredDate),1)],8,x)))),128))])])])}var N={data(){return{coupons:{cafeName:"엔드테라스",benefit:"아메리카노(HOT/ICE) 1잔 무료",expiredDate:"2022-04-11 ~ 2022-05-11",couponId:0},stampData:[{cafeName:"엔드테라스",stampCount:3},{cafeName:"엔드테라스",stampCount:2}],couponData:[{cafeId:1,cafeName:"엔드테라스",benefit:"아메리카노(HOT/ICE) 1잔 무료",expiredDate:"2022-04-11 ~ 2022-05-11"},{cafeId:2,cafeName:"메가 커피",benefit:"아메리카노(HOT/ICE) 1잔 무료",expiredDate:"2022-04-11 ~ 2022-05-11"}]}},created(){this.fetchStamps(),this.fetchCoupons()},methods:{modalActive(t){let a=!0,e=this.couponData[t];this.$emit("modalActive",a,e)},async fetchStamps(){try{console.log("스탬프 조회");const{stampData:t}=await _().get(" http://34.64.32.174:8080/stamps",{headers:{Authorization:`Bearer ${this.$store.state.token}`}});this.stampData=t.data,console.log(this.stampData)}catch(t){console.log(t.message)}},async fetchCoupons(){try{console.log("쿠폰 조회");const{data:t}=await _().get(" http://34.64.32.174:8080/coupons");this.couponData=t.data,console.log(this.couponData)}catch(t){console.log(t.message)}}}};const Z=(0,g.Z)(N,[["render",H]]);var K=Z,Y=e(1142),j=e(9242);const O={class:"content-mypage"},V={class:"btn__close"},B=["src"],E={class:"content__wrapper"},T={class:"content__wrapper--text"},W=["src"],q={class:"card__title"},R={class:"card__text--benefit"},P={class:"card__text--expire"},U=["disabled"];function F(t,a,e,o,n,i){return(0,s.wg)(),(0,s.iD)("div",O,[(0,s._)("div",V,[(0,s._)("button",{type:"button",class:"btn--transparent",onClick:a[0]||(a[0]=a=>t.$emit("close-modal"))},[(0,s._)("img",{src:n.ic__close},null,8,B)])]),(0,s._)("div",E,[(0,s._)("div",T,[(0,s._)("img",{src:n.ic__ticket},null,8,W),(0,s._)("span",q,(0,c.zw)(e.couponData.cafeName),1),(0,s._)("span",R,(0,c.zw)(e.couponData.benefit),1),(0,s._)("span",P,(0,c.zw)(e.couponData.expiredDate),1)]),(0,s.wy)((0,s._)("input",{placeholder:"사장님 아이디를 입력하세요.","onUpdate:modelValue":a[1]||(a[1]=t=>n.ownerId=t)},null,512),[[j.nr,n.ownerId]]),(0,s._)("button",{type:"button",class:(0,c.C_)(["btn--md",i.isValid?"btnPrimary":"btnDisabled"]),disabled:0==i.isValid,onClick:a[2]||(a[2]=(...t)=>i.useCoupon&&i.useCoupon(...t))}," 사용하기 ",10,U)])])}var G=e(8391),J=e.p+"img/ticket.6fcdceec.svg",Q={name:"ModalContent",props:{msg:String,couponData:Object},created(){console.log("쿠폰 데이터",this.couponData)},data(){return{ic__close:G,ic__ticket:J,ownerId:""}},computed:{isValid(){return""!=this.ownerId}},methods:{addReport(){this.$emit("close-modal")},modifyReport(){this.$emit("close-modal")},async useCoupon(){try{console.log("쿠폰 사용");const{data:t}=await _()["delete"](` http://34.64.32.174:8080/coupon/use?couponId=${this.couponData.cafeId}`,{headers:{Authorization:`Bearer ${this.$store.state.token}`}});console.log(t.message),this.$emit("close-modal")}catch(t){console.log(t.message),this.$emit("close-modal")}}}};const X=(0,g.Z)(Q,[["render",F]]);var tt=X,at={components:{ScrapedListComponent:f,CouponListComponent:K,ModalComponent:Y.Z,CouponModalContent:tt},data(){return{message:"",activeList:1,isModalActive:!1,couponData:[]}},methods:{setMessage(t){this.message=t},showList(t){this.activeList=t},modalActive(t,a){this.isModalActive=t,this.couponData=a}},created(){let t=!1;this.$store.commit("isHeaderActive",t)}};const et=(0,g.Z)(at,[["render",o]]);var st=et},8391:function(t,a,e){t.exports=e.p+"img/close.a59852f9.svg"}}]);
//# sourceMappingURL=101.c7ed637c.js.map