"use strict";(self["webpackChunkcroffle_frontend"]=self["webpackChunkcroffle_frontend"]||[]).push([[348],{5140:function(t,a,e){e.d(a,{AF:function(){return n},AJ:function(){return c},Xp:function(){return o}});var s=e(3376);function n(t){return s.Uj.post("like",t)}function o(t){return s.Uj.post("like/del",t)}function c(){return s.Uj.get("likes")}},1955:function(t,a,e){e.d(a,{$F:function(){return i},Bg:function(){return n},GR:function(){return r},VN:function(){return l},ci:function(){return c},l_:function(){return o}});var s=e(3376);function n(){return s.Uj.get("user/me")}function o(t){return s.Uj.put("nickname",t)}function c(t){return s.Uj.post("nickname/verify",t)}function i(){return s.Uj.get("stamps")}function l(){return s.Uj.get("coupons")}function r(t){return s.Uj["delete"](`coupon/use?couponId=${t}`)}},1142:function(t,a,e){e.d(a,{Z:function(){return d}});var s=e(3396);const n={class:"modal"},o=(0,s._)("div",{class:"overlay"},null,-1),c={class:"modal-card"};function i(t,a,e,i,l,r){return(0,s.wg)(),(0,s.iD)("div",n,[o,(0,s._)("div",c,[(0,s.WI)(t.$slots,"default")])])}var l={props:{couponData:[]}},r=e(89);const u=(0,r.Z)(l,[["render",i]]);var d=u},6944:function(t,a,e){e.r(a),e.d(a,{default:function(){return st}});var s=e(3396);function n(t,a,e,n,o,c){const i=(0,s.up)("router-view"),l=(0,s.up)("scraped-list-component"),r=(0,s.up)("coupon-list-component"),u=(0,s.up)("coupon-modal-content"),d=(0,s.up)("modal-component");return(0,s.wg)(),(0,s.iD)("div",null,[(0,s.Wm)(i,{onShowList:c.showList,activeList:o.activeList,onSetMessage:c.setMessage,message:o.message},null,8,["onShowList","activeList","onSetMessage","message"]),1==o.activeList?((0,s.wg)(),(0,s.j4)(l,{key:0})):2==o.activeList?((0,s.wg)(),(0,s.j4)(r,{key:1,onModalActive:c.modalActive,isModalActive:o.isModalActive},null,8,["onModalActive","isModalActive"])):(0,s.kq)("",!0),o.isModalActive?((0,s.wg)(),(0,s.j4)(d,{key:2,couponData:o.couponData},{default:(0,s.w5)((()=>[(0,s.Wm)(u,{onCloseModal:a[0]||(a[0]=t=>o.isModalActive=!1),couponData:o.couponData},null,8,["couponData"])])),_:1},8,["couponData"])):(0,s.kq)("",!0)])}var o=e(7139);const c={class:"mypage-scrap"},i=(0,s._)("h1",null,"예정된 원정",-1),l={class:"card__wrapper--column"},r=["onClick"],u={class:"card__title"},d={class:"card__text"};function p(t,a,e,n,p,m){return(0,s.wg)(),(0,s.iD)("div",c,[(0,s._)("header",null,[i,(0,s._)("span",null,(0,o.zw)(p.scrapList.length),1)]),(0,s._)("div",l,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(p.scrapList,((t,a)=>((0,s.wg)(),(0,s.iD)("div",{key:t,class:"card",onClick:t=>m.toCafeDetail(a)},[(0,s._)("span",u,(0,o.zw)(t.name),1),(0,s._)("span",d,(0,o.zw)(t.addr),1)],8,r)))),128))])])}var m=e(5140),f={created(){this.fetchScrapList()},data(){return{scrapList:[{id:0,name:"밀크북",addr:"서울특별시 성북구 "}]}},methods:{async fetchScrapList(){try{console.log("마이페이지 - 내가 스크랩 한 리스트 조회");const{data:t}=await(0,m.AJ)();this.scrapList=t.data,console.log(this.scrapLists)}catch(t){console.log(t.message)}},toCafeDetail(t){this.$router.push(`/cafe/${this.scrapList[t].id}`)}}},_=e(89);const g=(0,_.Z)(f,[["render",p]]);var v=g;const h={class:"mypage-membership"},w={class:"mypage-stamp"},D=(0,s._)("h1",null,"내가 모은 스탬프",-1),C={class:"card__wrapper--column"},y={class:"card__title"},k={class:"stamp-list"},b={class:"stamp-list"},L={class:"mypage-coupon"},A=(0,s._)("h1",null,"내가 모은 쿠폰",-1),M={class:"card__wrapper--column"},x=["onClick"],j={class:"card__title"},I={class:"card__text"},$={class:"card__text"};function z(t,a,e,n,c,i){return(0,s.wg)(),(0,s.iD)("div",h,[(0,s._)("div",w,[(0,s._)("header",null,[D,(0,s._)("span",null,(0,o.zw)(c.stampData.length),1)]),(0,s._)("div",C,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(c.stampData,((t,a)=>((0,s.wg)(),(0,s.iD)("div",{key:a,class:"card"},[(0,s._)("span",y,(0,o.zw)(t.cafeName),1),(0,s._)("div",k,[((0,s.wg)(),(0,s.iD)(s.HY,null,(0,s.Ko)(10,(t=>(0,s._)("i",{key:t,class:"fas fa-stroopwafel fa-3x"}))),64))]),(0,s._)("div",b,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(c.stampData[a].stampCount,(t=>((0,s.wg)(),(0,s.iD)("i",{key:t,class:"fas fa-stroopwafel fa-3x stampActive"})))),128))])])))),128))])]),(0,s._)("div",L,[(0,s._)("header",null,[A,(0,s._)("span",null,(0,o.zw)(c.couponData.length),1)]),(0,s._)("div",M,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(c.couponData,((t,a)=>((0,s.wg)(),(0,s.iD)("div",{key:a,class:"card",onClick:t=>i.modalActive(a)},[(0,s._)("span",j,(0,o.zw)(t.cafeName),1),(0,s._)("span",I,(0,o.zw)(t.benefit),1),(0,s._)("span",$,(0,o.zw)(t.expiredDate),1)],8,x)))),128))])])])}var N=e(1955),S={data(){return{coupons:{cafeName:"엔드테라스",benefit:"아메리카노(HOT/ICE) 1잔 무료",expiredDate:"2022-04-11 ~ 2022-05-11",couponId:0},stampData:[{cafeName:"엔드테라스",stampCount:3},{cafeName:"엔드테라스",stampCount:2}],couponData:[{cafeId:1,cafeName:"엔드테라스",benefit:"아메리카노(HOT/ICE) 1잔 무료",expiredDate:"2022-04-11 ~ 2022-05-11"},{cafeId:2,cafeName:"메가 커피",benefit:"아메리카노(HOT/ICE) 1잔 무료",expiredDate:"2022-04-11 ~ 2022-05-11"}]}},created(){this.fetchStamps(),this.fetchCoupons()},methods:{modalActive(t){let a=!0,e=this.couponData[t];this.$emit("modalActive",a,e)},async fetchStamps(){try{console.log("스탬프 조회");const{stampData:t}=await(0,N.$F)();this.stampData=t.body.stamps,console.log(this.stampData)}catch(t){console.log(t.message)}},async fetchCoupons(){try{console.log("쿠폰 조회");const{data:t}=await(0,N.VN)();this.couponData=t.data,console.log(this.couponData)}catch(t){console.log(t.message)}}}};const U=(0,_.Z)(S,[["render",z]]);var H=U,Z=e(1142),V=e(9242);const K={class:"content-mypage"},Y={class:"btn__close"},O=["src"],R={class:"content__wrapper"},E={class:"content__wrapper--text"},F=["src"],T={class:"card__title"},W={class:"card__text--benefit"},q={class:"card__text--expire"},G=["disabled"];function J(t,a,e,n,c,i){return(0,s.wg)(),(0,s.iD)("div",K,[(0,s._)("div",Y,[(0,s._)("button",{type:"button",class:"btn--transparent",onClick:a[0]||(a[0]=a=>t.$emit("close-modal"))},[(0,s._)("img",{src:c.ic__close},null,8,O)])]),(0,s._)("div",R,[(0,s._)("div",E,[(0,s._)("img",{src:c.ic__ticket},null,8,F),(0,s._)("span",T,(0,o.zw)(e.couponData.cafeName),1),(0,s._)("span",W,(0,o.zw)(e.couponData.benefit),1),(0,s._)("span",q,(0,o.zw)(e.couponData.expiredDate),1)]),(0,s.wy)((0,s._)("input",{placeholder:"사장님 아이디를 입력하세요.","onUpdate:modelValue":a[1]||(a[1]=t=>c.ownerId=t)},null,512),[[V.nr,c.ownerId]]),(0,s._)("button",{type:"button",class:(0,o.C_)(["btn--md",i.isValid?"btnPrimary":"btnDisabled"]),disabled:0==i.isValid,onClick:a[2]||(a[2]=(...t)=>i.useCoupon&&i.useCoupon(...t))}," 사용하기 ",10,G)])])}var B=e(8391),P=e.p+"img/ticket.6fcdceec.svg",X={name:"ModalContent",props:{msg:String,couponData:Object},created(){console.log("쿠폰 데이터",this.couponData)},data(){return{ic__close:B,ic__ticket:P,ownerId:""}},computed:{isValid(){return""!=this.ownerId}},methods:{addReport(){this.$emit("close-modal")},modifyReport(){this.$emit("close-modal")},async useCoupon(){try{console.log("쿠폰 사용");const{data:t}=await(0,N.GR)(this.couponData.cafeId);console.log(t.message),this.$emit("close-modal")}catch(t){console.log(t.message),this.$emit("close-modal")}}}};const Q=(0,_.Z)(X,[["render",J]]);var tt=Q,at={components:{ScrapedListComponent:v,CouponListComponent:H,ModalComponent:Z.Z,CouponModalContent:tt},data(){return{message:"",activeList:1,isModalActive:!1,couponData:[]}},methods:{setMessage(t){this.message=t},showList(t){this.activeList=t},modalActive(t,a){this.isModalActive=t,this.couponData=a}},created(){let t=!1;this.$store.commit("isHeaderActive",t)}};const et=(0,_.Z)(at,[["render",n]]);var st=et},8391:function(t,a,e){t.exports=e.p+"img/close.a59852f9.svg"}}]);
//# sourceMappingURL=348.22375b89.js.map