"use strict";(self["webpackChunkcroffle_frontend"]=self["webpackChunkcroffle_frontend"]||[]).push([[503],{1582:function(e,a,t){t.r(a),t.d(a,{default:function(){return G}});var n=t(3396),o=t(7139);const s={key:0,class:"search"},i={key:1},r=["src"],c={key:0,class:"infoWindow"},l={class:"map__wrapper"},d=(0,n._)("p",{class:"guide",id:"guide"},[(0,n.Uk)(" 원정대에게 알려주고 싶은 카페가 있나요?"),(0,n._)("br"),(0,n.Uk)(" 카페를 찾아 크로플 원정대에 제보해주세요! ")],-1);function f(e,a,t,f,p,u){const m=(0,n.up)("searchbar-component"),h=(0,n.up)("not-registered-cafe"),g=(0,n.up)("cafe-list-component"),w=(0,n.up)("naver-marker"),v=(0,n.up)("naver-info-window"),k=(0,n.up)("naver-maps");return(0,n.wg)(),(0,n.iD)("div",null,[(0,n.Wm)(m,{onShowResult:u.showResult,onFetchInfo:u.fetchInfo,onFetchResult:u.fetchResult,service:p.service,registered:p.registered,cafeData:e.cafeData},null,8,["onShowResult","onFetchInfo","onFetchResult","service","registered","cafeData"]),0==p.service?((0,n.wg)(),(0,n.iD)("div",s,[0==p.registered?((0,n.wg)(),(0,n.j4)(h,{key:0,onClosePage:a[0]||(a[0]=e=>p.service=!0)})):(0,n.kq)("",!0),1==p.registered?((0,n.wg)(),(0,n.j4)(g,{key:1,onClosePage:a[1]||(a[1]=e=>p.service=!0)})):(0,n.kq)("",!0)])):(0,n.kq)("",!0),1==p.service?((0,n.wg)(),(0,n.iD)("div",i,[(0,n.Wm)(k,{width:"100%",height:"100vh",class:"main-container--map",onOnLoad:a[4]||(a[4]=a=>e.onLoadMap(p.cafes))},{default:(0,n.w5)((()=>[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(p.cafes,((t,s)=>((0,n.wg)(),(0,n.j4)(w,{key:s,latitude:t.mapy,longitude:t.mapx,onOnLoad:a[2]||(a[2]=a=>e.onLoadMarker(a)),onClick:e=>u.openInfo(t.id)},{default:(0,n.w5)((()=>[(0,n._)("img",{src:p.ic__marker},null,8,r),p.isWindowOpen?((0,n.wg)(),(0,n.iD)("div",c,(0,o.zw)(t[s].id),1)):(0,n.kq)("",!0)])),_:2},1032,["latitude","longitude","onClick"])))),128)),(0,n.Wm)(v,{marker:e.marker,isOpen:e.isOpen,onOnLoad:a[3]||(a[3]=a=>e.onLoadInfoWindow(e.event))},null,8,["marker","isOpen"])])),_:1}),(0,n._)("div",l,[d,(0,n._)("button",{type:"button",onClick:a[5]||(a[5]=(...e)=>u.toCafeReport&&u.toCafeReport(...e)),class:"btn--primary",id:"btn-report"}," 제보하기 + ")])])):(0,n.kq)("",!0)])}var p=t.p+"img/speechBubble.a260e7b2.svg",u=t.p+"img/marker.22f42703.svg",m=t(6265),h=t.n(m);const g={id:"not-regi-cafe",class:"container"},w=(0,n._)("i",{class:"fas fa-arrow-left fa-2x"},null,-1),v=[w],k=(0,n._)("p",null,[(0,n.Uk)(" 아직 등록되지 않은 카페네요."),(0,n._)("br"),(0,n.Uk)(" 조금만 기다려 주세요! ")],-1);function _(e,a,t,o,s,i){return(0,n.wg)(),(0,n.iD)("div",g,[(0,n._)("button",{onClick:a[0]||(a[0]=a=>e.$emit("close-page"))},v),k])}var b={},y=t(89);const C=(0,y.Z)(b,[["render",_]]);var D=C;const L={id:"cafe-list",class:"container"},R={class:"card__wrapper--column"},I={class:"text__name"},O={class:"text__addr"},$=(0,n._)("i",{class:"far fa-times-circle fa-2x"},null,-1),W=[$];function x(e,a,t,s,i,r){return(0,n.wg)(),(0,n.iD)("div",L,[(0,n._)("div",R,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.cafeList,(e=>((0,n.wg)(),(0,n.iD)("div",{key:e.id,class:"cafe__card"},[(0,n._)("span",I,(0,o.zw)(e.name),1),(0,n._)("span",O,(0,o.zw)(e.addr),1)])))),128))]),(0,n._)("button",{onClick:a[0]||(a[0]=a=>e.$emit("close-page"))},W)])}var S={data(){return{}},props:{cafeList:Array}};const H=(0,y.Z)(S,[["render",x]]);var M=H,q=t(9242);const F={id:"searchbar"},U={class:"input__box"},Z=["src"];function j(e,a,t,o,s,i){return(0,n.wg)(),(0,n.iD)("div",F,[(0,n._)("div",U,[(0,n.wy)((0,n._)("input",{placeholder:"크로플 원정을 떠날 카페를 검색해주세요.","onUpdate:modelValue":a[0]||(a[0]=e=>s.name=e)},null,512),[[q.nr,s.name]]),(0,n._)("button",{type:"button",onClick:a[1]||(a[1]=(...e)=>i.searchCafe&&i.searchCafe(...e))},[(0,n._)("img",{src:s.ic_magnifier},null,8,Z)])])])}var A=t.p+"img/position.c2587f93.svg",K=t.p+"img/magnifier.ba2bdae4.svg",N={data(){return{ic_position:A,ic_magnifier:K,address:"서울특별시 성북구",name:"",cafeInfo:[],cafeData:[]}},methods:{async searchCafe(){const e=!1;this.$emit("showResult",e);try{const{data:e}=await h().get(` http://34.64.32.174:8080/cafe/search?name=${this.name}`);if(console.log(e),this.cafeData=e.data[0],200==e.data.code){const a=!0,t=this.cafeData;this.$emit("fetchResult",a,t),console.log("데이터",e.data)}else{const e=!1;this.$emit("fetchResult",e)}}catch(a){console.log(a)}}}};const z=(0,y.Z)(N,[["render",j]]);var T=z,B=t(4870),P=t(8960),Y=t(5008),V={components:{SearchbarComponent:T,NaverMaps:P.K0,NaverMarker:P.At,NaverInfoWindow:P._T,NotRegisteredCafe:D,CafeListComponent:M},setup:()=>{const e=(0,B.iH)(),a=(0,B.iH)(),t=(0,B.iH)(),n=(0,B.iH)(!1),o=e=>{t.value=e},s=e=>{a.value=e},i=e=>{console.log("cafes",e),e=e.map((e=>(window.naver.maps.Service.geocode({address:e.addr},(function(a,t){if(a!==window.naver.maps.Service.Status.OK)return alert("Something wrong!");var n=t.result;console.log("도로명 주소->좌표 반환결과",n.items[0].point),e.mapx=parseFloat(n.items[0].point.x),e.mapy=parseFloat(n.items[0].point.y)})),console.log("카페 도로명 주소",e),e)))};return{onLoadMarker:s,map:e,marker:a,onLoadMap:i,isOpen:n,onLoadInfoWindow:o}},mounted(){this.fetchCafes();const e=this.$route.query.token;console.log("token",e),localStorage.setItem("userToken",e),this.$store.commit("setToken",e),(0,Y.aZ)(e)},async created(){let e=!0;this.$store.commit("isHeaderActive",e)},data(){return{registered:!1,ic__speechBubble:p,ic__marker:u,page:"main",clientIp:"",clientAddr:"",service:!0,email:"",cafeList:[],cafes:[],isWindowOpen:!1}},methods:{fetchInfo(e){this.cafeInfo=e},fetchResult(e,a){this.registered=e,this.cafeList=a},showResult(e){this.service=e},toCafeReport(){this.$router.push("/cafes/report")},async fetchCafes(){try{const{data:e}=await h().get(" http://34.64.32.174:8080/cafes");console.log("카페 로그 찍기",e),this.cafes=e.data}catch(e){console.log(e)}},openInfo(e){this.$router.push(`/cafe/${e}`),console.log(e),this.isWindowOpen},openInfoWindow(e){console.log("jh cafe",this.marker,e),this.marker=new window.naver.maps.Marker({position:new window.naver.maps.LatLng(e.mapy,e.mapx),map:window.naver.maps}),this.isOpen=!this.isOpen}}};const E=(0,y.Z)(V,[["render",f]]);var G=E}}]);
//# sourceMappingURL=503.9c59d02f.js.map