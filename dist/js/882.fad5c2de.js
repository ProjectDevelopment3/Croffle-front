"use strict";(self["webpackChunkcroffle_frontend"]=self["webpackChunkcroffle_frontend"]||[]).push([[882],{797:function(e,a,n){n.d(a,{Dk:function(){return r},UB:function(){return s},j2:function(){return o}});var t=n(3376);function r(){return t.eE.get("cafes")}function o(e){return t.eE.get(`cafe?id=${e}`)}function s(e){return t.eE.get(`cafe/search?name=${e}`)}},9136:function(e,a,n){n.r(a),n.d(a,{default:function(){return V}});var t=n(3396);const r={key:0,class:"search"},o={key:1},s=["src"],i=(0,t._)("div",{class:"infowindow-style"},"click Marker!😎",-1),c={class:"map__wrapper"},d=(0,t._)("p",{class:"guide",id:"guide"},[(0,t.Uk)(" 원정대에게 알려주고 싶은 카페가 있나요?"),(0,t._)("br"),(0,t.Uk)(" 카페를 찾아 크로플 원정대에 제보해주세요! ")],-1);function l(e,a,n,l,f,u){const p=(0,t.up)("searchbar-component"),m=(0,t.up)("not-registered-cafe"),h=(0,t.up)("cafe-list-component"),g=(0,t.up)("naver-marker"),w=(0,t.up)("naver-info-window"),v=(0,t.up)("naver-maps");return(0,t.wg)(),(0,t.iD)("div",null,[(0,t.Wm)(p,{onShowResult:u.showResult,onFetchInfo:u.fetchInfo,onFetchResult:u.fetchResult,service:f.service,registered:f.registered},null,8,["onShowResult","onFetchInfo","onFetchResult","service","registered"]),0==f.service?((0,t.wg)(),(0,t.iD)("div",r,[0==f.registered?((0,t.wg)(),(0,t.j4)(m,{key:0,onClosePage:a[0]||(a[0]=e=>f.service=!0)})):(0,t.kq)("",!0),1==f.registered?((0,t.wg)(),(0,t.j4)(h,{key:1,onClosePage:a[1]||(a[1]=e=>f.service=!0)})):(0,t.kq)("",!0)])):(0,t.kq)("",!0),1==f.service?((0,t.wg)(),(0,t.iD)("div",o,[(0,t.Wm)(v,{width:"100%",height:"100vh",class:"main-container--map",onOnLoad:a[4]||(a[4]=a=>e.onLoadMap(f.cafes))},{default:(0,t.w5)((()=>[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(f.cafes,(n=>((0,t.wg)(),(0,t.j4)(g,{key:n.id,latitude:n.mapy,longitude:n.mapx,onOnLoad:a[2]||(a[2]=a=>e.onLoadMarker(a)),onClick:e=>u.openInfoWindow(n)},{default:(0,t.w5)((()=>[(0,t._)("img",{src:f.ic__marker},null,8,s)])),_:2},1032,["latitude","longitude","onClick"])))),128)),(0,t.Wm)(w,{marker:e.marker,isOpen:e.isOpen,onOnLoad:a[3]||(a[3]=a=>e.onLoadInfoWindow(a))},{default:(0,t.w5)((()=>[i])),_:1},8,["marker","isOpen"])])),_:1}),(0,t._)("div",c,[d,(0,t._)("button",{type:"button",onClick:a[5]||(a[5]=(...e)=>u.toCafeReport&&u.toCafeReport(...e)),class:"btn--primary",id:"btn-report"}," 제보하기 + ")])])):(0,t.kq)("",!0)])}var f=n.p+"img/speechBubble.a260e7b2.svg",u=n.p+"img/marker.22f42703.svg",p=n(797);const m={id:"not-regi-cafe",class:"container"},h=(0,t._)("i",{class:"fas fa-arrow-left fa-2x"},null,-1),g=[h],w=(0,t._)("p",null,[(0,t.Uk)(" 아직 등록되지 않은 카페네요."),(0,t._)("br"),(0,t.Uk)(" 조금만 기다려 주세요! ")],-1);function v(e,a,n,r,o,s){return(0,t.wg)(),(0,t.iD)("div",m,[(0,t._)("button",{onClick:a[0]||(a[0]=a=>e.$emit("close-page"))},g),w])}var _={},k=n(89);const y=(0,k.Z)(_,[["render",v]]);var b=y,C=n(7139);const L={id:"cafe-list",class:"container"},R={class:"card__wrapper--column"},D={class:"text__name"},$={class:"text__addr"},x=(0,t._)("i",{class:"far fa-times-circle fa-2x"},null,-1),I=[x];function O(e,a,n,r,o,s){return(0,t.wg)(),(0,t.iD)("div",L,[(0,t._)("div",R,[((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(n.cafeList,(e=>((0,t.wg)(),(0,t.iD)("div",{key:e.id,class:"cafe__card"},[(0,t._)("span",D,(0,C.zw)(e.name),1),(0,t._)("span",$,(0,C.zw)(e.addr),1)])))),128))]),(0,t._)("button",{onClick:a[0]||(a[0]=a=>e.$emit("close-page"))},I)])}var M={data(){return{}},props:{cafeList:[{name:"카페 이름1",addr:"주소1"},{name:"카페 이름2",addr:"주소2"}]}};const W=(0,k.Z)(M,[["render",O]]);var H=W,S=n(9242);const U={id:"searchbar"},F={class:"input__box"},j=["src"];function q(e,a,n,r,o,s){return(0,t.wg)(),(0,t.iD)("div",U,[(0,t._)("div",F,[(0,t.wy)((0,t._)("input",{placeholder:"크로플 원정을 떠날 카페를 검색해주세요.","onUpdate:modelValue":a[0]||(a[0]=e=>o.name=e)},null,512),[[S.nr,o.name]]),(0,t._)("button",{type:"button",onClick:a[1]||(a[1]=(...e)=>s.searchCafe&&s.searchCafe(...e))},[(0,t._)("img",{src:o.ic_magnifier},null,8,j)])])])}var Z=n.p+"img/position.c2587f93.svg",B=n.p+"img/magnifier.ba2bdae4.svg",K={data(){return{ic_position:Z,ic_magnifier:B,address:"서울특별시 성북구",name:"",cafeInfo:[]}},methods:{async searchCafe(){const e=!1;this.$emit("showResult",e);try{console.log("등록된 카페 여부 검색");const{cafeData:e}=await(0,p.UB)(this.name);if("일치하는 카페가 없습니다."==e.messages){const e=!1;this.$emit("fetchResult",e)}else{const a=!1;this.$emit("fetchResult",a,e)}}catch(a){console.log(a)}}}};const N=(0,k.Z)(K,[["render",q]]);var A=N,E=n(4870),z=n(8960),P=n(5008),T={components:{SearchbarComponent:A,NaverMaps:z.K0,NaverMarker:z.At,NaverInfoWindow:z._T,NotRegisteredCafe:b,CafeListComponent:H},setup:()=>{const e=(0,E.iH)(),a=(0,E.iH)(),n=(0,E.iH)(),t=(0,E.iH)(!1),r=e=>{n.value=e},o=e=>{a.value=e},s=e=>{console.log("cafes",e),e=e.map((e=>(window.naver.maps.Service.geocode({address:e.roadaddr},(function(a,n){if(a!==window.naver.maps.Service.Status.OK)return alert("Something wrong!");var t=n.result;console.log("도로명 주소->좌표 반환결과",t.items[0].point),e.mapx=parseFloat(t.items[0].point.x),e.mapy=parseFloat(t.items[0].point.y)})),console.log("카페 도로명 주소",e),e)))};return{onLoadMarker:o,map:e,marker:a,onLoadMap:s,isOpen:t,onLoadInfoWindow:r}},mounted(){const e=this.$route.query.token;console.log("token",e),this.$store.commit("setToken",e),(0,P.aZ)(e)},async created(){let e=!0;this.$store.commit("isHeaderActive",e),await this.fetchCafes()},data(){return{registered:!1,ic__speechBubble:f,ic__marker:u,page:"main",clientIp:"",clientAddr:"",service:!0,email:"",cafeList:[],cafes:[{id:"0",name:"",roadaddr:"서울 중구 세종대로 135",mapx:0,mapy:0},{id:"2",name:"",roadaddr:"서울 중구 세종대로22길 16",mapx:0,mapy:0},{id:"3",name:"",roadaddr:"서울 중구 세종대로 110 서울특별시청 ",mapx:0,mapy:0}]}},methods:{fetchInfo(e){this.cafeInfo=e},fetchResult(e,a){this.registered=e,this.cafeList=a},showResult(e){this.service=e},toCafeReport(){this.$router.push("/cafes/report")},async fetchCafes(){try{console.log("전체 카페 조회(지도 출력)");const{cafeData:e}=await(0,p.Dk)();this.cafes.id=e.data.id,this.cafes.name=e.data.name,this.cafes.roadaddr=e.data.addr}catch(e){console.log(e)}},selectCafe(e){this.$router.push(`cafe/${e.id}`)},openInfoWindow(e){console.log("jh cafe",this.marker,e),this.marker=new window.naver.maps.Marker({position:new window.naver.maps.LatLng(e.mapy,e.mapx),map:window.naver.maps}),this.isOpen=!this.isOpen}}};const Y=(0,k.Z)(T,[["render",l]]);var V=Y}}]);
//# sourceMappingURL=882.fad5c2de.js.map